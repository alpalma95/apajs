(function(a,b){typeof exports=="object"&&typeof module<"u"?b(exports):typeof define=="function"&&define.amd?define(["exports"],b):(a=typeof globalThis<"u"?globalThis:a||self,b(a.roundjs={}))})(this,function(a){"use strict";let{isArray:b}=Array,H=t=>b(t)?t.map(e=>typeof e=="string"?document.createTextNode(e):e):typeof t=="string"?document.createTextNode(t):t;class P extends HTMLElement{constructor(){super()}connectedCallback(){this.getProps();let e=this.shadowRoot?this.shadowRoot:this,i=H(this.ctx.render(this.ctx)??this.render());b(i)?i.forEach(o=>e.appendChild(o)):e.appendChild(i),this.onInit()}attributeChangedCallback(e,i,o){e.startsWith(":")?this[e.slice(1)]=o:this[e]=o,this.watch(e.slice(1),JSON.parse(i),JSON.parse(o))}disconnectedCallback(){this.onDestroy()}getProps(){this.getAttributeNames().forEach(e=>{if(!e.startsWith(":"))return;let i={};i[e.slice(1)]=JSON.parse(this.getAttribute(e)),this.ctx?this.ctx.props=i:this.props=i})}watch(e,i,o){}onInit(){}onDestroy(){}render(){}}let K=t=>{for(let e of Object.keys(t))typeof t[e]=="function"&&(t[e]=t[e].bind(t));return t},L=(t,e,i={})=>{window.customElements.define(t,class extends P{constructor(){super(),this.ctx=K(e),this.ctx.getHost=()=>this,i.shadow&&this.attachShadow({mode:i.shadow})}onInit(){this.ctx.onInit&&this.ctx.onInit(this)}onDestroy(){this.ctx.onDestroy&&this.ctx.onDestroy(this)}watch(o,n,s){this.ctx.watch&&this.ctx.watch(o,n,s,this)}})};function q(t){for(var e,i,o=arguments,n=1,s="",c="",l=[0],r=function(d){n===1&&(d||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(d?o[d]:s):n===3&&(d||s)?(l[1]=d?o[d]:s,n=2):n===2&&s==="..."&&d?l[2]=Object.assign(l[2]||{},o[d]):n===2&&s&&!d?(l[2]=l[2]||{})[s]=!0:n>=5&&(n===5?((l[2]=l[2]||{})[i]=d?s?s+o[d]:o[d]:s,n=6):(d||s)&&(l[2][i]+=d?s+o[d]:s)),s=""},h=0;h<t.length;h++){h&&(n===1&&r(),r(h));for(var g=0;g<t[h].length;g++)e=t[h][g],n===1?e==="<"?(r(),l=[l,"",null],n=3):s+=e:n===4?s==="--"&&e===">"?(n=1,s=""):s=e+s[0]:c?e===c?c="":s+=e:e==='"'||e==="'"?c=e:e===">"?(r(),n=1):n&&(e==="="?(n=5,i=s,s=""):e==="/"&&(n<5||t[h][g+1]===">")?(r(),n===3&&(l=l[0]),n=l,(l=l[0]).push(this.apply(null,n.slice(1))),n=0):e===" "||e==="	"||e===`
`||e==="\r"?(r(),n=2):s+=e),n===3&&s==="!--"&&(n=4,l=l[0])}return r(),l.length>2?l.slice(1):l[1]}let C=Object,u,f=C.getPrototypeOf,O=document,m,p,_,A={isConnected:1},z=1e3,v,N={},Q=f(A),j=f(f),V=(t,e,i,o)=>(t??(setTimeout(i,o),new Set)).add(e),k=(t,e,i)=>{let o=p;p=e;try{return t(i)}catch(n){return console.error(n),i}finally{p=o}},S=t=>t.filter(e=>{var i;return(i=e._dom)==null?void 0:i.isConnected}),D=t=>v=V(v,t,()=>{for(let e of v)e._bindings=S(e._bindings),e._listeners=S(e._listeners);v=u},z),w={get val(){return p==null||p.add(this),this._val},get oldVal(){return p==null||p.add(this),this._oldVal},set val(t){let e=this;if(t!==e._val){e._val=t;let i=[...e._listeners=S(e._listeners)];for(let o of i)W(o.f,o.s,o._dom),o._dom=u;e._bindings.length?m=V(m,e,Z):e._oldVal=t}}},E=t=>({__proto__:w,_val:t,_oldVal:t,_bindings:[],_listeners:[]}),I=t=>f(t??0)===w,U=t=>I(t)?t.val:t,X=t=>I(t)?t.oldVal:t,y=(t,e)=>{let i=new Set,o={f:t},n=_;_=[];let s=k(t,i,e);s=(s??O).nodeType?s:new Text(s);for(let c of i)D(c),c._bindings.push(o);for(let c of _)c._dom=s;return _=n,o._dom=s},W=(t,e=E(),i)=>{let o=new Set,n={f:t,s:e};n._dom=i??(_==null?void 0:_.push(n))??A,e.val=k(t,o);for(let s of o)D(s),s._listeners.push(n);return e},M=(t,...e)=>{for(let i of e.flat(1/0)){let o=f(i??0),n=o===w?y(()=>i.val):o===j?y(i):i;n!=u&&t.append(n)}return t},Y=t=>(t._isBindingFunc=1,t),R=t=>new Proxy((e,...i)=>{var c;let[o,...n]=f(i[0]??0)===Q?i:[{},...i],s=t?O.createElementNS(t,e):O.createElement(e);for(let[l,r]of C.entries(o)){let h=T=>T?C.getOwnPropertyDescriptor(T,l)??h(f(T)):u,g=e+","+l,d=N[g]??(N[g]=((c=h(f(s)))==null?void 0:c.set)??0),x=d?d.bind(s):s.setAttribute.bind(s,l),G=f(r??0);G===w?y(()=>(x(r.val),s)):G===j&&(!l.startsWith("on")||r._isBindingFunc)?y(()=>(x(r()),s)):x(r)}return M(s,...n)},{get:(e,i)=>e.bind(u,i)}),F=(t,e)=>e?e!==t&&t.replaceWith(e):t.remove(),Z=()=>{let t=[...m].filter(e=>e._val!==e._oldVal);m=u;for(let e of new Set(t.flatMap(i=>i._bindings=S(i._bindings))))F(e._dom,y(e.f,e._dom)),e._dom=u;for(let e of t)e._oldVal=e._val},ee=(t,e)=>F(t,y(e,t));const J={add:M,_:Y,tags:R(),tagsNS:R,state:E,val:U,oldVal:X,derive:W,hydrate:ee};function te(t,e,...i){const o=J.tags[t];return e?o(e,...i):o(...i)}const ie=q.bind(te);let{fromEntries:se,entries:ne}=Object,$=t=>typeof t!="object"?B(t):se(ne(t).map(([e,i])=>[e,$(i)]));const{state:B,derive:oe}=J;a.ReactiveWC=P,a.defineComponent=L,a.derive=oe,a.html=ie,a.reactive=$,a.state=B,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
