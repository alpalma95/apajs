let{isArray:t}=Array,{fromEntries:e,entries:s,keys:n}=Object,o=(e,s)=>{t(s)?s.forEach((t=>"string"==typeof t?e.appendChild(document.createTextNode(t)):e.appendChild(t))):e.appendChild("string"==typeof s?document.createTextNode(s):s)},r=(t,e)=>{window.customElements.define(t.tag,class extends HTMLElement{constructor(){super(),this.ctx={onInit:(t=(()=>{}))=>t(),onDestroy:(t=(()=>{}))=>t(),subscribers:[],host:this,watch:(t,e)=>this.ctx.subscribers.push({attributeName:t,cb:e})},t.shadow&&this.attachShadow({mode:t.shadow})}static get observedAttributes(){return t.observed}connectedCallback(){let t={};this.getAttributeNames().forEach((e=>{e.startsWith(":")&&(t[e.slice(1)]=this.getAttribute(e))})),this.ctx.props=t;let s=e(this.ctx),n=this.shadowRoot??this;o(n,s),this.ctx.onInit()}attributeChangedCallback(t,e,s){this.ctx.subscribers.forEach((({attributeName:n,cb:o})=>{t===n&&o(t,e,s)}))}disconnectedCallback(){this.ctx.onDestroy()}})};const c=function(t){for(var e,s,n=arguments,o=1,r="",c="",i=[0],a=function(t){1===o&&(t||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(t?n[t]:r):3===o&&(t||r)?(i[1]=t?n[t]:r,o=2):2===o&&"..."===r&&t?i[2]=Object.assign(i[2]||{},n[t]):2===o&&r&&!t?(i[2]=i[2]||{})[r]=!0:o>=5&&(5===o?((i[2]=i[2]||{})[s]=t?r?r+n[t]:n[t]:r,o=6):(t||r)&&(i[2][s]+=t?r+n[t]:r)),r=""},l=0;l<t.length;l++){l&&(1===o&&a(),a(l));for(var h=0;h<t[l].length;h++)e=t[l][h],1===o?"<"===e?(a(),i=[i,"",null],o=3):r+=e:4===o?"--"===r&&">"===e?(o=1,r=""):r=e+r[0]:c?e===c?c="":r+=e:'"'===e||"'"===e?c=e:">"===e?(a(),o=1):o&&("="===e?(o=5,s=r,r=""):"/"===e&&(o<5||">"===t[l][h+1])?(a(),3===o&&(i=i[0]),o=i,(i=i[0]).push(this.apply(null,o.slice(1))),o=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(a(),o=2):r+=e),3===o&&"!--"===r&&(o=4,i=i[0])}return a(),i.length>2?i.slice(1):i[1]}.bind((function(e,n,...r){const c=document.createElement(e);if(n)for(const[t,e]of s(n))t.startsWith("on-")?c.addEventListener(t.slice(3),e):c.setAttribute(t,e);return r&&r.forEach((e=>{if(t(e))e.forEach((t=>o(c,t)));else if("object"==typeof e)c.appendChild(e);else{const t=document.createTextNode(e);c.appendChild(t)}})),c}));let i=null,a=t=>(i=t,t()),l=t=>{let e=new Set,s="object"==typeof t?Object.fromEntries(Object.entries(t).map((([t,e])=>[t,"object"==typeof e?l(e):e]))):"function"==typeof t?{val:a((()=>t))}:{val:t};return new Proxy(s,{get:(t,s)=>(null!==i&&(e.add(i),i=null),"function"==typeof t[s]?t[s]():t[s]),set:(t,s,n)=>(t[s]=n,e.forEach((t=>t())),!0)})};export{r as defineComponent,a as derive,c as html,l as stream};
//# sourceMappingURL=apa.min.js.map