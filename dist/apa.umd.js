(function(r,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(r=typeof globalThis<"u"?globalThis:r||self,p(r.apajs={}))})(this,function(r){"use strict";let{isArray:p}=Array,{fromEntries:j,entries:g,keys:v}=Object,a=(n,o)=>{p(o)?o.forEach(d=>typeof d=="string"?n.appendChild(document.createTextNode(d)):n.appendChild(d)):n.appendChild(typeof o=="string"?document.createTextNode(o):o)},E=(n,o)=>{window.customElements.define(n.tag,class extends HTMLElement{constructor(){super(),this.ctx={onInit:d=>{},onDestroy:()=>{},host:this,watch:(d,i,t)=>{}},n.shadow&&this.attachShadow({mode:n.shadow})}static get observedAttributes(){return n.observed}connectedCallback(){let d={};this.getAttributeNames().forEach(e=>{e.startsWith(":")&&(d[e.slice(1)]=this.getAttribute(e))}),this.ctx.props=d;let i=o(this.ctx),t=this.shadowRoot??this;a(t,i),this.ctx.onInit(t)}attributeChangedCallback(d,i,t){this.ctx.watch(d,i,t)}disconnectedCallback(){this.ctx.onDestroy()}})};function w(n){for(var o,d,i=arguments,t=1,e="",f="",s=[0],u=function(c){t===1&&(c||(e=e.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(c?i[c]:e):t===3&&(c||e)?(s[1]=c?i[c]:e,t=2):t===2&&e==="..."&&c?s[2]=Object.assign(s[2]||{},i[c]):t===2&&e&&!c?(s[2]=s[2]||{})[e]=!0:t>=5&&(t===5?((s[2]=s[2]||{})[d]=c?e?e+i[c]:i[c]:e,t=6):(c||e)&&(s[2][d]+=c?e+i[c]:e)),e=""},h=0;h<n.length;h++){h&&(t===1&&u(),u(h));for(var m=0;m<n[h].length;m++)o=n[h][m],t===1?o==="<"?(u(),s=[s,"",null],t=3):e+=o:t===4?e==="--"&&o===">"?(t=1,e=""):e=o+e[0]:f?o===f?f="":e+=o:o==='"'||o==="'"?f=o:o===">"?(u(),t=1):t&&(o==="="?(t=5,d=e,e=""):o==="/"&&(t<5||n[h][m+1]===">")?(u(),t===3&&(s=s[0]),t=s,(s=s[0]).push(this.apply(null,t.slice(1))),t=0):o===" "||o==="	"||o===`
`||o==="\r"?(u(),t=2):e+=o),t===3&&e==="!--"&&(t=4,s=s[0])}return u(),s.length>2?s.slice(1):s[1]}function x(n,o,...d){const i=document.createElement(n);if(o)for(const[t,e]of g(o))t.startsWith("on-")?i.addEventListener(t.slice(3),e):i.setAttribute(t,e);return d&&d.forEach(t=>{if(p(t)){t.forEach(e=>a(i,e));return}if(typeof t!="object"){const e=document.createTextNode(t);i.appendChild(e);return}i.appendChild(t)}),i}const C=w.bind(x);let l=null,b=n=>(l=n,n()),y=n=>{let o=new Set,d=()=>{l!==null&&(o.add(l),l=null)},i=()=>{o.forEach(e=>e())},t=typeof n=="object"?Object.fromEntries(Object.entries(n).map(([e,f])=>[e,typeof f=="object"?y(f):f])):typeof n=="function"?{val:b(()=>n)}:{val:n};return new Proxy(t,{get(e,f){return d(),typeof e[f]=="function"?e[f]():e[f]},set(e,f,s){return e[f]=s,i(),!0}})};r.defineComponent=E,r.derive=b,r.html=C,r.stream=y,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
