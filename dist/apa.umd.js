(function(u,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(u=typeof globalThis<"u"?globalThis:u||self,d(u.apajs={}))})(this,function(u){"use strict";let{isArray:d}=Array,{fromEntries:A,entries:O,keys:E}=Object,g=(n,t,s)=>{n.addEventListener(t.slice(1),s)},j=(n,t)=>{E(t).forEach(s=>{if(s.startsWith("@")){g(n,s,t[s]);return}n.setAttribute(s,t[s])})},p=n=>{if(typeof n!="object")return document.createTextNode(n);const t=document.createElement(n.type);return n.props&&j(t,n.props),n.children&&n.children.map(s=>d(s)?s.map(p):p(s)).forEach(s=>{d(s)?s.forEach(r=>t.appendChild(r)):t.appendChild(s)}),t},C=(n,t)=>{window.customElements.define(n.tag,class extends HTMLElement{constructor(){super(),this.ctx={onInit:(s=()=>{})=>s(),onDestroy:(s=()=>{})=>s(),subscribers:[],getHost:()=>this,watch:(s,r)=>this.ctx.subscribers.push({attributeName:s,cb:r})},n.shadow&&this.attachShadow({mode:n.shadow})}static get observedAttributes(){return n.observed}connectedCallback(){let s={};this.getAttributeNames().forEach(e=>{e.startsWith(":")&&(s[e.slice(1)]=this.getAttribute(e))}),this.ctx.props=s;let r=t(this.ctx),i=this.shadowRoot??this;d(r)?r.forEach(e=>i.appendChild(p(e))):i.appendChild(p(r)),this.ctx.onInit()}attributeChangedCallback(s,r,i){this.ctx.subscribers.forEach(({attributeName:e,cb:c})=>{s===e&&c(s,r,i)})}disconnectedCallback(){this.ctx.onDestroy()}})};function w(n){for(var t,s,r=arguments,i=1,e="",c="",o=[0],h=function(f){i===1&&(f||(e=e.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?o.push(f?r[f]:e):i===3&&(f||e)?(o[1]=f?r[f]:e,i=2):i===2&&e==="..."&&f?o[2]=Object.assign(o[2]||{},r[f]):i===2&&e&&!f?(o[2]=o[2]||{})[e]=!0:i>=5&&(i===5?((o[2]=o[2]||{})[s]=f?e?e+r[f]:r[f]:e,i=6):(f||e)&&(o[2][s]+=f?e+r[f]:e)),e=""},l=0;l<n.length;l++){l&&(i===1&&h(),h(l));for(var m=0;m<n[l].length;m++)t=n[l][m],i===1?t==="<"?(h(),o=[o,"",null],i=3):e+=t:i===4?e==="--"&&t===">"?(i=1,e=""):e=t+e[0]:c?t===c?c="":e+=t:t==='"'||t==="'"?c=t:t===">"?(h(),i=1):i&&(t==="="?(i=5,s=e,e=""):t==="/"&&(i<5||n[l][m+1]===">")?(h(),i===3&&(o=o[0]),i=o,(o=o[0]).push(this.apply(null,i.slice(1))),i=0):t===" "||t==="	"||t===`
`||t==="\r"?(h(),i=2):e+=t),i===3&&e==="!--"&&(i=4,o=o[0])}return h(),o.length>2?o.slice(1):o[1]}function x(n,t,...s){return{type:n,props:t,children:s}}const v=w.bind(x);let b=null,a=n=>(b=n,n()),y=n=>{let t=new Set,s=()=>{b!==null&&(t.add(b),b=null)},r=()=>{t.forEach(e=>e())},i=typeof n=="object"?Object.fromEntries(Object.entries(n).map(([e,c])=>[e,typeof c=="object"?y(c):c])):typeof n=="function"?{val:a(()=>n)}:{val:n};return new Proxy(i,{get(e,c){return s(),typeof e[c]=="function"?e[c]():e[c]},set(e,c,o){return e[c]=o,r(),!0}})};u.defineComponent=C,u.derive=a,u.html=v,u.stream=y,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
